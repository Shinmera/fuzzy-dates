<!DOCTYPE html> <html lang="EN"> <head> <meta charset="utf-8"> <title>Fuzzy Dates</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.project h1{font-size:1.7em;}article.project h1,article.project h2,article.project h3,article.project h4,article.project h5,article.project h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.project >header{text-align:center;}article.project >header img.logo{display:block;margin:auto;max-height:170px;}article.project >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.project >header .version{vertical-align:bottom;}article.project >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.project >header .description{margin:0;}article.project >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.project >header .pages a{display:inline-block;padding:0 0.2em;}article.project >section{margin:1em 0 1em 0;}article.project #index >ul{list-style:none;margin:0;padding:0;}article.project .row label{display:inline-block;min-width:8em;}article.project #system .row{display:flex;}article.project #system #dependencies{display:inline;margin:0;padding:0;}article.project #system #dependencies li{display:inline;padding:0 0.2em;}article.project #system #author label{vertical-align:top;}article.project #system #author ul{display:inline-block;margin:0;padding:0;list-style:none;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition.callable >header .arguments .arguments:before,.definition.type >header .arguments .arguments:before{content:"(";}.definition.callable >header .arguments .argument,.definition.type >header .arguments .argument{padding:0;}.definition.callable >header .arguments .argument.lambda-list-keyword,.definition.type >header .arguments .argument.lambda-list-keyword{color:#991155;}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;}</style> </head> <body> <article class="project"> <header>   <h1>fuzzy dates</h1>   <span class="version">1.0.0</span>    <p class="description">A library to fuzzily parse date strings</p>   </header> <section id="documentation"><article><h1 id="about fuzzy-dates">About Fuzzy-Dates</h1><p>This is a small library to very fuzzily parse time and date strings into a universal-time timestamp. Among the fuzzily supported formats are:</p><ul><li><p>Forwards and backwards relative stamps</p></li><li><p>Clocks</p></li><li><p>RFC1123</p></li><li><p>RFC3339</p></li><li><p>ISO8661</p></li><li><p>Weekdays and months</p></li><li><p>UNIX timestamps</p></li></ul><p>In short, it should parse a lot of what you throw at it and give you a reasonable timestamp for it. Note that while this does make this parsing rather suitable for parsing human input, there's still ambiguities that cannot be resolved, such as whether the user thinks dates are YMD, DMY, or MDY, and the human mind's ingenuity in coming up with new ways to write dates and times can't all be accounted for, so there are definitely timestamps that we can understand, which this library won't be able to parse or will parse different to how we understand it.</p></article></section>   <section id="system"> <h2>System Information</h2>  <div class="row"> <label for="version">Version:</label> <a id="version">1.0.0</a> </div>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external">cl-ppcre</a></li><li><a class="external" href="https://Shinmera.github.io/documentation-utils/">documentation-utils</a></li></ul> </div>   <div class="row" id="author"> <label for="author">Author:</label> <a href="mailto:shinmera@tymoon.eu">Yukari Hafner</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/LICENSE">zlib</a> </div>   <div class="row"> <label for="homepage">Homepage:</label> <a id="homepage" href="https://shinmera.github.io/fuzzy-dates/">https://shinmera.github.io/fuzzy-dates/</a> </div>   <div class="row"> <label for="bug-tracker">Bug Tracker:</label> <a id="bug-tracker" href="https://github.com/shinmera/fuzzy-dates/issues">https://github.com/shinmera/fuzzy-dates/issues</a> </div>   <div class="row"> <label for="sources">Sources:</label> <a id="sources" href="https://github.com/shinmera/fuzzy-dates.git">https://github.com/shinmera/fuzzy-dates.git</a> </div>  </section>    <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE ORG.SHIRAKUMO.FUZZY-DATES"> <header> <h3> <a href="#PACKAGE%20ORG.SHIRAKUMO.FUZZY-DATES">ORG.SHIRAKUMO.FUZZY-DATES</a> </h3> <ul class="nicknames"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:DECODE-INTEGER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3ADECODE-INTEGER">DECODE-INTEGER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">I</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L104">Source</a>  </header> <div class="docstring"><pre>Parse an integer in digit or word format.

If ERRORP is true, failing to parse the month name will signal an
error. Otherwise NIL is returned.

The understood words go from one all the way up to trillion, though no
abbreviations are supported.

Examples:

  100
  one hundred
  twenty-two million three hundred two</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:DECODE-MONTH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3ADECODE-MONTH">DECODE-MONTH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">M</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L69">Source</a>  </header> <div class="docstring"><pre>Turn a month name into an integer between 1 and 12.

If ERRORP is true, failing to parse the month name will signal an
error. Otherwise NIL is returned.

See <a href="http://www.lispworks.com/documentation/HyperSpec/Body/25_ada.htm" class="exref">http://www.lispworks.com/documentation/HyperSpec/Body/25_ada.htm</a>

Examples:

  ja
  feb
  march</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:DECODE-TIMEZONE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3ADECODE-TIMEZONE">DECODE-TIMEZONE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TZ</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L151">Source</a>  </header> <div class="docstring"><pre>Turn a timezone name into a number of hours of UTC offset.

If ERRORP is true, failing to parse the month name will signal an
error. Otherwise NIL is returned.

See <a href="http://www.lispworks.com/documentation/HyperSpec/Body/25_ada.htm" class="exref">http://www.lispworks.com/documentation/HyperSpec/Body/25_ada.htm</a>

Examples:

  Z
  GMT
  JST</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:DECODE-UNIT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3ADECODE-UNIT">DECODE-UNIT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">U</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L85">Source</a>  </header> <div class="docstring"><pre>Turn a unit name into a scaling factor relative to seconds.

If ERRORP is true, failing to parse the month name will signal an
error. Otherwise NIL is returned.

The supported time units go from nanoseconds to aeons and includes all
sorts of abbreviations for them.

See <a href="http://www.lispworks.com/documentation/HyperSpec/Body/25_ada.htm" class="exref">http://www.lispworks.com/documentation/HyperSpec/Body/25_ada.htm</a>

Examples:

  ms
  sec
  y
  aeons</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:DECODE-WEEKDAY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3ADECODE-WEEKDAY">DECODE-WEEKDAY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">W</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L58">Source</a>  </header> <div class="docstring"><pre>Turn a weekday name into an integer between 0 and 6.

If ERRORP is true, failing to parse the month name will signal an
error. Otherwise NIL is returned.

See <a href="http://www.lispworks.com/documentation/HyperSpec/Body/25_ada.htm" class="exref">http://www.lispworks.com/documentation/HyperSpec/Body/25_ada.htm</a>

Examples:

  mo
  tue
  thursday</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:PARSE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE">PARSE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STRING</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L235">Source</a>  </header> <div class="docstring"><pre>Fuzzily parse a time string into a universal-time timestamp.


If ERRORP is true, failing to parse the string name will signal an
error. Otherwise NIL is returned. When an error is signalled, two
restarts will be active:

  USE-VALUE -- interactive, allows supplying a universal-time to use
  CONTINUE  -- simply returns the current universal-time timestamp

This also applies to all the sub-functions used.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-FORWARD-TIME" class="xref">PARSE-FORWARD-TIME</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-BACKWARD-TIME" class="xref">PARSE-BACKWARD-TIME</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-RFC3339-LIKE" class="xref">PARSE-RFC3339-LIKE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-ISO8661-LIKE" class="xref">PARSE-ISO8661-LIKE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-REVERSE-LIKE" class="xref">PARSE-REVERSE-LIKE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-RFC1123-LIKE" class="xref">PARSE-RFC1123-LIKE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-SINGLE" class="xref">PARSE-SINGLE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:PARSE-BACKWARD-TIME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-BACKWARD-TIME">PARSE-BACKWARD-TIME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STRING</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L179">Source</a>  </header> <div class="docstring"><pre>Parse a relative time for the past.

The basic syntax is:

  STAMP ::= (C U)(, C U)* ago
  C     --- a positive integer
  U     --- a unit name

Examples:
  10 seconds ago
  6 years, 5 minutes ago
  thirty hours ago

See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3ADECODE-UNIT" class="xref">DECODE-UNIT</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3ADECODE-INTEGER" class="xref">DECODE-INTEGER</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE" class="xref">PARSE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:PARSE-FORWARD-TIME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-FORWARD-TIME">PARSE-FORWARD-TIME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STRING</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L170">Source</a>  </header> <div class="docstring"><pre>Parse a relative time for the future.

The basic syntax is:

  STAMP ::= in (C U)(, C U)*
  C     --- a positive integer
  U     --- a unit name

Examples:

  in 10 seconds
  in 5 minutes, 10 years
  in five hours

See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3ADECODE-UNIT" class="xref">DECODE-UNIT</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3ADECODE-INTEGER" class="xref">DECODE-INTEGER</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE" class="xref">PARSE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:PARSE-ISO8661-LIKE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-ISO8661-LIKE">PARSE-ISO8661-LIKE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STRING</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP0</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L194">Source</a>  </header> <div class="docstring"><pre>Parse a timestamp that looks vaguely like an ISO8661 date.

This is very similar to the RFC3339 format, but instead follows the
compact format without separators between date and time formats.

A typical compact ISO8661 string has the following format:

  20230916T100615Z

This function is slightly more lenient and permits the following
separators between date and time parts:

  space dash t

It permits date and time parts to not be padded.

It also permits omitting the date and timezone parts of the
timestamp.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE" class="xref">PARSE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:PARSE-REVERSE-LIKE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-REVERSE-LIKE">PARSE-REVERSE-LIKE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STRING</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP0</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L200">Source</a>  </header> <div class="docstring"><pre>Parse a timestamp that is &quot;reverse&quot; from the others

A typical reverse time string has the following format:

  10:18:03 16.9.2023

This function is more lenient, and makes the following fuzzy matches:
It permits the following separators between date parts:

  space comma period slash dash

It permits the following separators between date and time parts:

  space dash t

It permits the following separators between time parts:

  space period dash colon

It permits date and time parts to not be padded.

It also permits omitting the time and timezone parts of the
timestamp.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE" class="xref">PARSE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:PARSE-RFC1123-LIKE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-RFC1123-LIKE">PARSE-RFC1123-LIKE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STRING</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP0</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L206">Source</a>  </header> <div class="docstring"><pre>Parse a timestamp that looks vaguely like an RFC1123 date.

A typical RFC1123 string has the following format:

  Thu, 23 Jul 2013 19:42:23 GMT

This function is more lenient, and makes the following fuzzy matches:
It permits the following separators between date parts:

  space comma period slash dash

It permits the following separators between date and time parts:

  space comma period slash dash t

It permits the following separators between time parts:

  space period dash colon

It permits date and time parts to not be padded.

It also permits omitting the day of week, time, and timezone parts of
the timestamp.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE" class="xref">PARSE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:PARSE-RFC3339-LIKE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-RFC3339-LIKE">PARSE-RFC3339-LIKE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STRING</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP0</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L188">Source</a>  </header> <div class="docstring"><pre>Parse a timestamp that looks vaguely like an RFC3339 date.

A typical RFC3339 string has the following format:

  2023-09-16T10:06:15.00-05:00

This function is more lenient, and makes the following fuzzy matches:
It permits the following separators between date parts:

  space comma period slash dash

It permits the following separators between date and time parts:

  space dash t

It permits the following separators between time parts:

  space period dash colon

It permits date and time parts to not be padded.

It also permits omitting the date and timezone parts of the
timestamp.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE" class="xref">PARSE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FUZZY-DATES:PARSE-SINGLE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE-SINGLE">PARSE-SINGLE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STRING</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ERRORP0</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/fuzzy-dates/blob/1c811c758872fe37a056476610850842888b6981/fuzzy-dates.lisp#L215">Source</a>  </header> <div class="docstring"><pre>Parse a single token.

If it's an integer, it can denote either:

  seconds in the future, if below 1000
  a year, if below 5000
  a UNIX timestamp

If it's a word, it can denote either:

  a day of the week, pushed to the next week if the current day is
  already past.
  a month, pushed to the next year if the current month is already
  past.

Examples:

  10
  1900
  mon
  march

See <a href="#FUNCTION%20ORG.SHIRAKUMO.FUZZY-DATES%3APARSE" class="xref">PARSE</a></pre></div> </article> </li> </ul> </article> </li> </ul> </section>  </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 